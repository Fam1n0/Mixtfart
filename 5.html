<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mixed Art</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<style>
  body { margin: 0; padding-top: 60px; }
  #fileInput { display: block; margin: 10px; }
  #buttons { position: absolute; top: 0; left: 0; }
</style>
</head>
<body>
<input type="file" id="fileInput" accept="image/*" multiple>
<div id="buttons">
  <button onclick="startMix()">Mix</button>
  <button onclick="stopMix()">Stop</button>
  <button onclick="saveImage()">Save</button>
</div>
<script>
  let images = [];
  let mixing = false;

  function setup() {
    createCanvas(windowWidth, windowHeight - 60);
    frameRate(30); // Set frame rate to 30 fps or higher for a faster effect
    document.getElementById('fileInput').addEventListener('change', function(e) {
      // ... file input event listener code
    });
  }

  function draw() {
    if (mixing && images.length > 0) {
      background(0); // Set the background to black to mimic a TV screen
      for (let i = 0; i < width * height / 1000; i++) { // Increase the number for more density
        const pieceWidth = 1; // Smaller piece size for finer grain
        const pieceHeight = 1;
        const img = random(images);
        const x = floor(random(img.width - pieceWidth));
        const y = floor(random(img.height - pieceHeight));
        const imgPiece = img.get(x, y, pieceWidth, pieceHeight);
        const destX = floor(random(width));
        const destY = floor(random(height));
        image(imgPiece, destX, destY);
      }
    }
  }

  function startMix() {
    // ... startMix function code
  }

  function stopMix() {
    // ... stopMix function code
  }

  function saveImage() {
    // ... saveImage function code
  }
</script>
</body>
</html>
